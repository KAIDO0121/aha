<form action="https://localhost:8000/api/login" method="post" id="myForm">
    <label for="email">Please fill in your email and password</label>  
    <p><input id="email" name="email" value="" placeholder="email"></p>
    <p><input id="password" type="password" 
      name="password" value="" placeholder="password"></p>
    <p><input type="submit" value="Submit form"></p>
    
  </form>

<button><a href='/api/oauth/google/register_and_login'>Sign in with Google</a></button>
<button><a href='/api/oauth/facebook/register_and_login'>Sign in with Facebook</a></button>


<script>
    window.addEventListener( "load", function () {
    function sendData() {
        // stop the regular form submission
   

      // collect the form data while iterating over the inputs
      var data = {};
      for (var i = 0, ii = form.length; i < ii; ++i) {
        var input = form[i];
        if (input.name) {
          data[input.name] = input.value;
        }
      }

      // construct an HTTP request
      var xhr = new XMLHttpRequest();
      xhr.open(form.method, form.action, true);
      xhr.setRequestHeader('Content-Type', 'application/json; charset=UTF-8');

      // send the collected data as JSON
      xhr.send(JSON.stringify(data));

      xhr.onreadystatechange = function()
      {
          if (xhr.readyState == 4 && xhr.status == 200)
          {
            location.replace(`${location.origin}/dashboard`)
          }
      }


    }
  
    // Access the form element...
    const form = document.getElementById( "myForm" );
  
    // ...and take over its submit event.
    form.addEventListener( "submit", function ( event ) {
      event.preventDefault();
  
      sendData();
    } );
  } );
</script>


 